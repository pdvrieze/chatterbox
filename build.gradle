apply plugin: 'idea'

apply plugin: 'war'
apply plugin: 'gwt'

repositories {
    jcenter()
}

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'de.richsource.gradle.plugins:gwt-gradle-plugin:0.6'
    }
}

ext {
    tomcatVersion = '6.0.44'
}

version = '1.0.0'
description = 'A chatbox applications that students can test their android apps against.'
//group = ['service', 'server']

sourceCompatibility = JavaVersion.VERSION_1_7
targetCompatibility = JavaVersion.VERSION_1_7

configurations {
    apiCompile
    apiProvided
    main {
        extendsFrom apiCompile
    }
}

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
}

task tomcatRun(dependsOn: ["war"]) {
    group = 'web application'
    description = "Do everything needed to be able to run as embedded tomcat"
}


gwt {
    gwtVersion = '2.4.0'
    modules 'net.devrieze.chatterbox.Chatterbox'
//    devModules 'net.devrieze.chatterbox.ChatterboxDraft'
}

/*
tomcat {
    contextPath='/PEUserMessageHandler'
}
*/
dependencies {
    providedCompile 'org.atmosphere:atmosphere-gwt-client:1.0.19'
    compile 'org.atmosphere:atmosphere-gwt-server:1.0.19'
    providedCompile "com.intellij:annotations:12.0"
    providedCompile "com.google.gwt:gwt-user:${gwt.gwtVersion}"

}

